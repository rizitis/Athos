Packager="Anagnostakis Ioannis <rizitis@gmail.com>"

Homepage="https://wiki.qt.io/Qbs"
        #|--------------------------------------|#
SortDesc="Build Simply. Build Quickly."
LongDesc="Cross platform Qt build tool"
VERSION=2.5.0
PRGNAM=qbs
SRCNAM=qbs-src
SRCURL=https://download.qt.io/official_releases/qbs/2.5.0/qbs-src-2.5.0.tar.gz
COMPRESS=tar.gz
GITCHEK=
MDSCHK=
REQUIRED=
OPTDEPS=

BUILD=${BUILD:-1}
TAG=${TAG:-_rtz}


# This must be always here even if not patches needed.
patch_build() {
if [ -e $CWD/patches/ ]; then
  for PATCH in $CWD/patches/*.patch; do
    patch -p1 -i $PATCH || exit
  done
fi
}


slackbuild() {
CC=clang CXX=clang++ \
	cmake -B build -G Ninja \
		-DCMAKE_BUILD_TYPE=MinSizeRel \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DWITH_TESTS=ON \
		-DQBS_LIBEXEC_INSTALL_DIR=lib/qbs
	cmake --build build

ctest -j6 --test-dir build --output-on-failure
DESTDIR="$PKG" cmake --install build

	rm -rf "$PKG"/usr/share/qbs/examples/


}
